<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Tracking - Sixteen Clothing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">SIXTEEN CLOTHING</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Our Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#aboutModal">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact Us</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user"></i> My Account
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="my-profile.html">My Profile</a></li>
                            <li><a class="dropdown-item" href="my-orders.html">My Orders</a></li>
                            <li><a class="dropdown-item active" href="order-tracking.html">Order Tracking</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cart.html">
                            <i class="fas fa-shopping-cart"></i> Cart
                            <span class="badge bg-primary cart-count">0</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Tracking Header -->
    <section class="hero-section py-5">
        <div class="container text-center py-5">
            <h1 class="display-4 fw-bold mb-4">ORDER TRACKING</h1>
            <h2 class="display-6 mb-5">Track your order status</h2>
        </div>
    </section>

    <!-- Tracking Section -->
    <section class="tracking-section py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card shadow-sm mb-5">
                        <div class="card-body p-5">
                            <h3 class="card-title text-center mb-4">Track Your Order</h3>
                            <form id="trackingForm">
                                <div class="mb-3">
                                    <label for="orderNumber" class="form-label">Order Number</label>
                                    <input type="text" class="form-control" id="orderNumber" placeholder="Enter your order number" required>
                                </div>
                                <div class="mb-3">
                                    <label for="emailAddress" class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="emailAddress" placeholder="Enter your email address" required>
                                </div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary btn-lg">Track Order</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card shadow-sm" id="trackingResults" style="display: none;">
                        <div class="card-body p-5">
                            <div class="text-center mb-4">
                                <h3>Order <span id="trackingOrderNumber"></span></h3>
                                <p class="text-muted">Placed on <span id="orderDate"></span></p>
                            </div>
                            
                            <div class="tracking-progress mb-5">
                                <div class="progress" style="height: 30px;">
                                    <div class="progress-bar" role="progressbar" id="progressBar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between mt-2">
                                    <div class="text-center">
                                        <i class="fas fa-clipboard-check fa-2x text-success" id="step1Icon"></i>
                                        <p class="mb-0 mt-1">Order<br>Confirmed</p>
                                        <small id="step1Date"></small>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-box fa-2x" id="step2Icon"></i>
                                        <p class="mb-0 mt-1">Processing</p>
                                        <small id="step2Date"></small>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-shipping-fast fa-2x" id="step3Icon"></i>
                                        <p class="mb-0 mt-1">Shipped</p>
                                        <small id="step3Date"></small>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-truck fa-2x" id="step4Icon"></i>
                                        <p class="mb-0 mt-1">Out for Delivery</p>
                                        <small id="step4Date"></small>
                                    </div>
                                    <div class="text-center">
                                        <i class="fas fa-home fa-2x" id="step5Icon"></i>
                                        <p class="mb-0 mt-1">Delivered</p>
                                        <small id="step5Date"></small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h5>Shipping Address</h5>
                                    <p id="trackingAddress"></p>
                                </div>
                                <div class="col-md-6">
                                    <h5>Order Summary</h5>
                                    <div class="d-flex justify-content-between">
                                        <span>Items:</span>
                                        <span id="trackingItemsTotal">$0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Shipping:</span>
                                        <span id="trackingShipping">$0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Tax:</span>
                                        <span id="trackingTax">$0.00</span>
                                    </div>
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Total:</span>
                                        <span id="trackingTotal">$0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <button class="btn btn-outline-primary" id="printInvoiceBtn">
                                    <i class="fas fa-print"></i> Print Invoice
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card shadow-sm mt-4" id="noResults" style="display: none;">
                        <div class="card-body text-center p-5">
                            <i class="fas fa-search fa-4x text-muted mb-3"></i>
                            <h4>Order Not Found</h4>
                            <p>We couldn't find an order with that information. Please check your order number and email address.</p>
                            <a href="contact.html" class="btn btn-primary">Contact Support</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

     <!-- Footer -->
    <footer class="bg-dark text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-4">SIXTEEN CLOTHING</h5>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque corporis amet elite author nulla.</p>
                </div>
                
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-4">Helpful Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-light">Home</a></li>
                        <li class="mb-2"><a href="products.html" class="text-light">Our Products</a></li>
                        <li class="mb-2"><a href="#" class="text-light" data-bs-toggle="modal" data-bs-target="#aboutModal">About Us</a></li>
                        <li class="mb-2"><a href="contact.html" class="text-light">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="col-md-4">
                    <h5 class="mb-4">Additional Pages</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-light">Terms & Conditions</a></li>
                        <li class="mb-2"><a href="#" class="text-light">Privacy Policy</a></li>
                        <li class="mb-2"><a href="#" class="text-light">Delivery Information</a></li>
                        <li class="mb-2"><a href="#" class="text-light">Returns Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <hr class="my-4 bg-secondary">
            
            <div class="row">
                <div class="col-md-6 mb-3 mb-md-0">
                    <p class="mb-0">Copyright Â© 2023 Sixteen Clothing Co., Ltd. - Design: TemplateMo</p>
                </div>
                
                <div class="col-md-6 text-md-end">
                    <div class="social-icons">
                        <a href="#" class="text-light me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // order-tracking.js
document.addEventListener('DOMContentLoaded', function() {
    // Initialize cart if not exists
    if (!localStorage.getItem('cart')) {
        localStorage.setItem('cart', JSON.stringify([]));
    }
    
    // Update cart count
    updateCartCount();
    
    // Get order ID from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const orderId = urlParams.get('order');
    
    // If order ID is provided in URL, auto-populate and search
    if (orderId) {
        document.getElementById('orderNumber').value = orderId;
        trackOrder();
    }
    
    // Tracking form submission
    document.getElementById('trackingForm').addEventListener('submit', function(e) {
        e.preventDefault();
        trackOrder();
    });
    
    // Print invoice button
    document.getElementById('printInvoiceBtn').addEventListener('click', function() {
        const orderNumber = document.getElementById('trackingOrderNumber').textContent;
        alert(`Printing invoice for ${orderNumber}`);
        // In a real application, this would open a print dialog for the invoice
    });
    
    // Logout functionality
    document.getElementById('logoutBtn').addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('Are you sure you want to logout?')) {
            window.location.href = 'index.html';
        }
    });
});

function trackOrder() {
    const orderNumber = document.getElementById('orderNumber').value;
    const emailAddress = document.getElementById('emailAddress').value;
    
    // Basic validation
    if (!orderNumber || !emailAddress) {
        showToast('Please enter both order number and email address');
        return;
    }
    
    // Email validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(emailAddress)) {
        showToast('Please enter a valid email address');
        return;
    }
    
    // Try to find order in history
    const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const order = orderHistory.find(o => o.id === orderNumber);
    
    if (!order) {
        // Show not found message
        document.getElementById('trackingResults').style.display = 'none';
        document.getElementById('noResults').style.display = 'block';
        return;
    }
    
    // Show tracking results
    document.getElementById('noResults').style.display = 'none';
    document.getElementById('trackingResults').style.display = 'block';
    
    // Populate order details
    document.getElementById('trackingOrderNumber').textContent = orderNumber;
    
    // Format order date
    const orderDate = new Date(order.date);
    document.getElementById('orderDate').textContent = orderDate.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
    
    // Set shipping address
    document.getElementById('trackingAddress').innerHTML = order.shippingAddress;
    
    // Calculate and set order totals
    const subtotal = calculateSubtotal(order.items);
    const shipping = 5.99;
    const tax = subtotal * 0.08;
    const total = subtotal + shipping + tax;
    
    document.getElementById('trackingItemsTotal').textContent = `$${subtotal.toFixed(2)}`;
    document.getElementById('trackingShipping').textContent = `$${shipping.toFixed(2)}`;
    document.getElementById('trackingTax').textContent = `$${tax.toFixed(2)}`;
    document.getElementById('trackingTotal').textContent = `$${total.toFixed(2)}`;
    
    // Update tracking progress based on order status
    updateTrackingProgress(order);
}

function updateTrackingProgress(order) {
    const status = order.status.toLowerCase();
    const orderDate = new Date(order.date);
    const now = new Date();
    const timeDiff = now - orderDate;
    const daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
    
    // Default dates for each step
    const confirmedDate = new Date(orderDate);
    const processingDate = new Date(orderDate);
    processingDate.setDate(processingDate.getDate() + 1);
    
    const shippedDate = new Date(orderDate);
    shippedDate.setDate(shippedDate.getDate() + 2);
    
    const outForDeliveryDate = new Date(orderDate);
    outForDeliveryDate.setDate(outForDeliveryDate.getDate() + 3);
    
    const deliveredDate = new Date(orderDate);
    deliveredDate.setDate(deliveredDate.getDate() + 4);
    
    // Set initial progress based on status
    let progress = 0;
    let step1Status = 'text-success';
    let step2Status = '';
    let step3Status = '';
    let step4Status = '';
    let step5Status = '';
    
    // Update progress based on order status
    if (status === 'processing') {
        progress = 25;
        step2Status = 'text-success';
    } else if (status === 'shipped') {
        progress = 50;
        step2Status = 'text-success';
        step3Status = 'text-success';
    } else if (status === 'out for delivery') {
        progress = 75;
        step2Status = 'text-success';
        step3Status = 'text-success';
        step4Status = 'text-success';
    } else if (status === 'delivered') {
        progress = 100;
        step2Status = 'text-success';
        step3Status = 'text-success';
        step4Status = 'text-success';
        step5Status = 'text-success';
    } else {
        // Default to confirmed
        progress = 10;
        step1Status = 'text-success';
    }
    
    // Update progress bar
    document.getElementById('progressBar').style.width = `${progress}%`;
    document.getElementById('progressBar').setAttribute('aria-valuenow', progress);
    
    // Update step icons
    document.getElementById('step1Icon').className = `fas fa-clipboard-check fa-2x ${step1Status}`;
    document.getElementById('step2Icon').className = `fas fa-box fa-2x ${step2Status}`;
    document.getElementById('step3Icon').className = `fas fa-shipping-fast fa-2x ${step3Status}`;
    document.getElementById('step4Icon').className = `fas fa-truck fa-2x ${step4Status}`;
    document.getElementById('step5Icon').className = `fas fa-home fa-2x ${step5Status}`;
    
    // Update dates
    document.getElementById('step1Date').textContent = confirmedDate.toLocaleDateString();
    document.getElementById('step2Date').textContent = processingDate.toLocaleDateString();
    document.getElementById('step3Date').textContent = shippedDate.toLocaleDateString();
    document.getElementById('step4Date').textContent = outForDeliveryDate.toLocaleDateString();
    document.getElementById('step5Date').textContent = deliveredDate.toLocaleDateString();
    
    // If order is in transit, simulate progress updates
    if (status === 'shipped' || status === 'out for delivery') {
        simulateLiveTracking(order, progress);
    }
}

function simulateLiveTracking(order, currentProgress) {
    // Only simulate if order is still in transit
    if (order.status.toLowerCase() === 'shipped') {
        // Simulate progress to out for delivery after 2 seconds
        setTimeout(() => {
            document.getElementById('progressBar').style.width = '75%';
            document.getElementById('progressBar').setAttribute('aria-valuenow', 75);
            document.getElementById('step4Icon').className = 'fas fa-truck fa-2x text-success';
            
            // Update status in localStorage
            updateOrderStatus(order.id, 'Out for Delivery');
        }, 2000);
        
        // Simulate progress to delivered after another 3 seconds
        setTimeout(() => {
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('progressBar').setAttribute('aria-valuenow', 100);
            document.getElementById('step5Icon').className = 'fas fa-home fa-2x text-success';
            
            // Update status in localStorage
            updateOrderStatus(order.id, 'Delivered');
            
            showToast('Your order has been delivered!');
        }, 5000);
    } else if (order.status.toLowerCase() === 'out for delivery') {
        // Simulate progress to delivered after 3 seconds
        setTimeout(() => {
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('progressBar').setAttribute('aria-valuenow', 100);
            document.getElementById('step5Icon').className = 'fas fa-home fa-2x text-success';
            
            // Update status in localStorage
            updateOrderStatus(order.id, 'Delivered');
            
            showToast('Your order has been delivered!');
        }, 3000);
    }
}

function updateOrderStatus(orderId, newStatus) {
    const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
    const orderIndex = orderHistory.findIndex(o => o.id === orderId);
    
    if (orderIndex !== -1) {
        orderHistory[orderIndex].status = newStatus;
        localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
    }
}

function calculateSubtotal(items) {
    return items.reduce((total, item) => total + (item.price * item.quantity), 0);
}

function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
    
    const cartCountElements = document.querySelectorAll('.cart-count');
    cartCountElements.forEach(element => {
        element.textContent = totalItems;
    });
}

function showToast(message) {
    // Create toast element
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.setAttribute('role', 'alert');
    toast.setAttribute('aria-live', 'assertive');
    toast.setAttribute('aria-atomic', 'true');
    toast.innerHTML = `
        <div class="toast-body d-flex justify-content-between">
            <span>${message}</span>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    `;
    
    // Add to container
    let container = document.querySelector('.toast-container');
    if (!container) {
        container = document.createElement('div');
        container.className = 'toast-container';
        document.body.appendChild(container);
    }
    
    container.appendChild(toast);
    
    // Initialize and show toast
    const bsToast = new bootstrap.Toast(toast);
    bsToast.show();
    
    // Remove toast after it's hidden
    toast.addEventListener('hidden.bs.toast', function() {
        toast.remove();
    });
}
    </script>
</body>
</html>